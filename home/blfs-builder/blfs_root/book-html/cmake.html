<?xml version="1.0" encoding="ISO-8859-1" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" /><title>CMake-3.21.2</title><link rel="stylesheet" type="text/css" href="stylesheets/lfs.css" /><meta name="generator" content="DocBook XSL-NS Stylesheets Vsnapshot" /><link rel="stylesheet" href="stylesheets/lfs-print.css" type="text/css" media="print" /></head><body class="blfs" id="blfs-11.0"><div class="navheader"><h4>Beyond Linux<sup>®</sup> From Scratch 
  
  <span class="phrase">(System V</span> Edition) - Version 11.0</h4><h3>Chapter 1. Installing packages in dependency build order</h3><ul><li class="prev"><a accesskey="p" href="libuv.html" title="libuv-1.42.0">Prev</a><p>libuv-1.42.0</p></li><li class="next"><a accesskey="n" href="llvm.html" title="LLVM-12.0.1">Next</a><p>LLVM-12.0.1</p></li><li class="up"><a accesskey="u" href="ch01.html" title="Chapter 1. Installing packages in dependency build order">Up</a></li><li class="home"><a accesskey="h" href="index.html" title="Beyond Linux® From Scratch &#10;  &#10;  (System V Edition) - Version 11.0">Home</a></li></ul></div><div class="sect1" lang="en" xml:lang="en"><h1 class="sect1"><a id="cmake" name="cmake"></a>CMake-3.21.2</h1><div class="package" lang="en" xml:lang="en"><h2 class="sect2">Introduction to CMake</h2><p>
      The <span class="application">CMake</span> package contains a modern
      toolset used for generating Makefiles. It is a successor of the
      auto-generated <span class="command"><strong>configure</strong></span> script and aims to
      be platform- and compiler-independent. A significant user of
      <span class="application">CMake</span> is <span class="application">KDE</span>
      since version 4.
    </p><p>This package is known to build and work
                              properly using an LFS-11.0 platform.</p><h3>Package Information</h3><div class="itemizedlist"><ul class="compact"><li class="listitem"><p>
          Download (HTTP): <a class="ulink" href="https://cmake.org/files/v3.21/cmake-3.21.2.tar.gz">https://cmake.org/files/v3.21/cmake-3.21.2.tar.gz</a>
        </p></li><li class="listitem"></li><li class="listitem"><p>
          Download MD5 sum: 2ecc4091021c44f400bfbb25dcc77e97
        </p></li><li class="listitem"><p>
          Download size: 9.2 MB
        </p></li><li class="listitem"><p>
          Estimated disk space required: 319 MB (add 881 MB for tests)
        </p></li><li class="listitem"><p>
          Estimated build time: 2.0 SBU (add 3.2 SBU for tests, both using parallelism=4)
        </p></li></ul></div><h3>CMake Dependencies</h3><h4>Required</h4><p class="required">
      <a class="xref" href="libuv.html" title="libuv-1.42.0">libuv-1.42.0</a> 
    </p><h4>Recommended</h4><p class="recommended">
      curl (in full book)
              ,
      libarchive (in full book)
              , and
      nghttp2 (in full book)
              
    </p><h4>Optional</h4><p class="optional">
      gcc (in full book)
               (for gfortran),
      git (in full book)
               (for use during tests),
      mercurial (in full book)
               (for use during tests),
      qt5 (in full book)
               (for the Qt-based GUI),
      subversion (in full book)
               (for testing),
      <a class="ulink" href="http://rhash.sourceforge.net/">rhash</a>, and
      <a class="ulink" href="https://pypi.python.org/pypi/Sphinx">Sphinx</a> (for building documents)
    </p><p class="usernotes">User Notes:
      <a class="ulink" href="https://wiki.linuxfromscratch.org/blfs/wiki/cmake">https://wiki.linuxfromscratch.org/blfs/wiki/cmake</a>
    </p></div><div class="installation" lang="en" xml:lang="en"><h2 class="sect2">Installation of CMake</h2><p>
      Install <span class="application">CMake</span> by running the following
      commands:
    </p><pre class="userinput"><kbd class="command">sed -i '/"lib64"/s/64//' Modules/GNUInstallDirs.cmake &amp;&amp;

./bootstrap --prefix=/usr        \
            --system-libs        \
            --mandir=/share/man  \
            --no-system-jsoncpp  \
            --no-system-librhash \
            --docdir=/share/doc/cmake-3.21.2 &amp;&amp;
make</kbd></pre><p>
      To test the results, issue: <span class="command"><strong>LC_ALL=en_US.UTF-8 bin/ctest
      -j<em class="replaceable"><code>&lt;N&gt;</code></em> -O
      cmake-3.21.2-test.log</strong></span>, where
      <em class="replaceable"><code>&lt;N&gt;</code></em> is an integer between 1 and the
      number of system cores. Setting <code class="envar">LC_ALL</code> is needed to
      prevent some test failures when some of the locale variables are
      set to non English locales. One test, RunCMake.CMP0125. is known to fail.
    </p><p> 
      If you want to investigate a problem with a given "problem1-test",
      use <span class="command"><strong>bin/ctest -R "problem1-test"</strong></span> and, to omit it, use
      <span class="command"><strong>bin/ctest -E "problem1-test"</strong></span>. These options can be
      used together: <span class="command"><strong>bin/ctest -R "problem1-test" -E
      "problem2-test"</strong></span>.  Option -N can be used to display all
      available tests, and you can run <span class="command"><strong>bin/ctest</strong></span> for a
      sub-set of tests by using separated by spaces names or numbers as
      options. Option -/-help can be used to show all options.
    </p><p>
      Now, as the <code class="systemitem">root</code> user:
    </p><pre class="root"><kbd class="command">make install</kbd></pre></div><div class="commands" lang="en" xml:lang="en"><h2 class="sect2">Command Explanations</h2><p>
      <span class="command"><strong>sed ... Modules/GNUInstallDirs.cmake</strong></span>: 
      This command disables applications using cmake from attempting to 
      install files in /usr/lib64/.
    </p><p>
      <em class="parameter"><code>--system-libs</code></em>: This switch forces the build system
      to link against <span class="application">Zlib</span>,
      <span class="application">Bzip2</span>, <span class="application">cURL</span>,
      <span class="application">nghttp2</span>,
      <span class="application">Expat</span> and <span class="application">libarchive</span>
      installed on the system.
    </p><p>
      <em class="parameter"><code>--no-system-jsoncpp</code></em>: This switch removes the
      <span class="application">JSON-C++</span> library from the list of system
      libraries. A bundled version of that library is used instead.
    </p><p>
      <em class="parameter"><code>--no-system-librhash</code></em>: This switch removes the
      <span class="application">librhash</span> library from the list of system
      libraries used. A bundled version of that library is used instead.
    </p><p>
      <code class="option">--qt-gui</code>: This switch enables building the
      <span class="application">Qt</span>-based  GUI for
      <span class="application">CMake</span>.
    </p><p>
      <code class="option">--parallel=</code>: This switch enables performing the 
      <span class="application">CMake</span> bootstrap with multiple jobs
      at one time.
    </p></div><div class="content" lang="en" xml:lang="en"><h2 class="sect2">Contents</h2><div class="segmentedlist"><div class="seglistitem"><div class="seg"><strong class="segtitle">Installed Programs: </strong><span class="segbody">
          ccmake, cmake, cmake-gui (optional), cpack, and ctest
        </span></div><div class="seg"><strong class="segtitle">Installed Libraries: </strong><span class="segbody">
          None
        </span></div><div class="seg"><strong class="segtitle">Installed Directories: </strong><span class="segbody">
          /usr/share/cmake-3.21 and
          /usr/share/doc/cmake-3.21.2
        </span></div></div></div><div class="variablelist"><h3>Short Descriptions</h3><table border="0" class="variablelist"><colgroup><col align="left" valign="top" /><col /></colgroup><tbody><tr><td><p><a id="ccmake"></a><span class="term"><span class="command"><strong>ccmake</strong></span></span></p></td><td><p>
            is a curses based interactive frontend to
            <span class="command"><strong>cmake</strong></span>
          </p></td></tr><tr><td><p><a id="cmake-prog"></a><span class="term"><span class="command"><strong>cmake</strong></span></span></p></td><td><p>
            is the makefile generator
          </p></td></tr><tr><td><p><a id="cmake-gui"></a><span class="term"><span class="command"><strong>cmake-gui</strong></span></span></p></td><td><p>
            (optional) is the <span class="application">Qt</span>-based frontend to
            <span class="command"><strong>cmake</strong></span>
          </p></td></tr><tr><td><p><a id="cpack"></a><span class="term"><span class="command"><strong>cpack</strong></span></span></p></td><td><p>
            is the <span class="application">CMake</span> packaging program
          </p></td></tr><tr><td><p><a id="ctest"></a><span class="term"><span class="command"><strong>ctest</strong></span></span></p></td><td><p>
            is a testing utility for cmake-generated build trees
          </p></td></tr></tbody></table></div></div><p class="updated">Last updated 
      on
      </p></div><div class="navfooter"><ul><li class="prev"><a accesskey="p" href="libuv.html" title="libuv-1.42.0">Prev</a><p>libuv-1.42.0</p></li><li class="next"><a accesskey="n" href="llvm.html" title="LLVM-12.0.1">Next</a><p>LLVM-12.0.1</p></li><li class="up"><a accesskey="u" href="ch01.html" title="Chapter 1. Installing packages in dependency build order">Up</a></li><li class="home"><a accesskey="h" href="index.html" title="Beyond Linux® From Scratch &#10;  &#10;  (System V Edition) - Version 11.0">Home</a></li></ul></div></body></html>